import BlogLayout from "@/components/Blog/BlogLayout";

export const metadata = {
    title: "ì²« ë¸”ë¡œê·¸ ê¸€",
    description: "ì´ ë¸”ë¡œê·¸ë¥¼ ì–´ë–»ê²Œ ë§Œë“¤ì—ˆì„ê¹Œ~",
    date: "2025-02-19T03:02:14",
    tags: ["Frontend", "Next.js"],
    slug: "first",
};

<BlogLayout metadata={metadata}>

ğŸ‘‹

ì˜ˆì „ë¶€í„° ê³µë¶€í•˜ëŠ” ê±°ë‚˜ ì¼ìƒ ë¸”ë¡œê·¸ í•˜ë‚˜ ì¨ì•¼ì§€~ ìƒê° í•˜ë‹¤ê°€ ë“œë””ì–´ ë§Œë“¤ì—ˆë‹¤. ì–´ë–»ê²Œ ë§Œë“¤ì—ˆëŠ”ì§€ ì†Œê°œí•´ë³´ê² ë‹¤

code: [ğŸ”—](https://github.com/dohyeoplim/blog)

## ğŸš€ ë­ë¡œ ë§Œë“¤ì—ˆëƒë©´...

-   [Next.js](https://nextjs.org/)
-   [MDX(@next/mdx)](https://nextjs.org/docs/pages/building-your-application/configuring/mdx) â­ï¸ï¸

Next.jsë¡œ ì œì‘í•˜ì˜€ê³ , ìŠ¤íƒ€ì¼ë§ì€ [Tailwind CSS](http://tailwindcss.com/)ë¥¼ ì¼ë‹¤.
ë²„íŠ¼ ê°™ì€ ì»´í¬ë„ŒíŠ¸ë“¤ì€ [shadcn/ui](https://ui.shadcn.com/)ë¥¼ ì¼ë‹¤.

## ğŸ§‘â€ğŸ’» ì´ ë¸”ë¡œê·¸ëŠ” MDXë¥¼ ì“´ë‹¤.

ì›ë˜ëŠ” ê¸€ì„ ë§ˆí¬ë‹¤ìš´ì´ë¼ëŠ” í¬ë§·ìœ¼ë¡œ ê¸€ì„ ì“°ë ¤ê³  í–ˆëŠ”ë°, ì¢€ ì•Œì•„ë³´ë‹¤ ë³´ë‹ˆ ì•Œê²Œëœ [MDX](https://mdxjs.com/)ë¥¼ ì“°ê¸°ë¡œ í–ˆë‹¤.

**MDX**: Markdown + JSX => ë§ˆí¬ë‹¤ìš´ì— JSXë¥¼ ì“¸ ìˆ˜ ìˆëŠ” ê²ƒ. ì‰½ê²Œ ë§í•´ ë§ˆí¬ë‹¤ìš´ì— ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ê³§ì¥ ì“¸ ìˆ˜ ìˆëŠ” ê²ƒ.

ê·¸ëŸ¼ ì´ MDXë¥¼ ì–´ë–»ê²Œ ëœë”ë§í•˜ëƒ:

contentlayer, next-mdx-remote ë“± ë“± ì—¬ëŸ¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆì—ˆì§€ë§Œ, ì €ëŠ” **@next/mdx**ë¥¼ ì“°ê¸°ë¡œ í–ˆë‹¤.

@next/mdxëŠ” Next.jsì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì§€ì›í•˜ëŠ” íŒ¨í‚¤ì§€ì´ê¸°ì— ì ìš©ì´ ì•„ì£¼ ì‰½ë‹¤. íŠ¹íˆ MDXíŒŒì¼ ìì²´ë¥¼ pageë¡œ ë§Œë“¤ ì¸ì‹í•œë‹¤ëŠ” ì ì´ íŠ¹ì§•ì„(React componentë¡œ ìë™ ë³€í™˜í•¨).

next-mdx-remoteë‚˜ contentlayerë¥¼ ì“°ë©´ type-safetyì—ì„œ ìœ ë“¦í•˜ê³  ê¸°ëŠ¥ì´ ì¢€ ì¢€ ë§ì§€ë§Œ, ì´ ì‘ì€ ë¸”ë¡œê·¸ëŠ” **@next/mdx**ë§Œìœ¼ë¡œë„ ì¶©ë¶„í•˜ë‹¤ê³  íŒë‹¨í•¨.

ğŸ“„ ê³µì‹ë¬¸ì„œ: [https://nextjs.org/docs/](https://nextjs.org/docs/pages/building-your-application/configuring/mdx)

### âš’ï¸ MDXíŒŒì¼ë“¤ì„ í•œ ë²ˆì— ì½ê³  SSGë¡œ ë§Œë“¦

@next/mdxë¥¼ ì“°ë‹ˆê¹Œ ì›ë˜ëŠ” ë¸”ë¡œê·¸ ê¸€ì„ `app/blog/[ë¸”ë¡œê·¸ ì œëª©]/`ì•ˆì— ë‹¤ ë„£ì–´ì„œ file-system based routingìœ¼ë¡œ ë§Œë“¤ë ¤ê³  í–ˆë‹¤.

ê·¸ëŸ°ë° ê¸€ì„ ì“¸ ë•Œë§ˆë‹¤ `app/`ì•ˆì— í´ë” ë§Œë“¤ê³  ì •ë¦¬í•˜ê¸°ê°€ ë³µì¡í•´ ë³´ì—¬ì„œ, ë¸”ë¡œê·¸ ê¸€ë“¤ì€ ëª¨ë‘ `contents/`í´ë”ì— ëª¨ì•„ë‘ê³ , ì´ í´ë” ì•ˆì„ í•œêº¼ë²ˆì— ì½ì–´ì„œ static pagesë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ë°©ë²•ì„ ì¼ë‹µë‹ˆë‹¤

```plaintext
...
README.md
public/
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ blog/
â”‚   â”‚   â”œâ”€â”€ [slug]/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ globals.css
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Blog/
â”‚   â”‚   â”œâ”€â”€ BlogLayout.tsx
â”‚   â”‚   â”œâ”€â”€ CodeBlock.tsx
â”‚   â”‚   â”œâ”€â”€ PreviewList.tsx
â”‚   â”‚   â””â”€â”€ PreviewListItem.tsx
â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”œâ”€â”€ ThemeProvider.tsx
â”‚   â”œâ”€â”€ ThemeSwitch.tsx
â”‚   â”œâ”€â”€ Time.tsx
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ button.tsx
â”‚       â”œâ”€â”€ card.tsx
â”‚       â””â”€â”€ dropdown-menu.tsx
â”œâ”€â”€ contents/
â”‚   â””â”€â”€ first.mdx
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ fonts.ts
â”‚   â”œâ”€â”€ mdxUtils.ts
â”‚   â””â”€â”€ utils.ts
â””â”€â”€ types/
    â””â”€â”€ PostMeta.ts
...
```

ìš°ì„  @next/mdxê°€ mdx íŒŒì¼ ìì²´ë¥¼ react componentë¡œ ë³€í™˜í•´ì£¼ê¸° ë•Œë¬¸ì—, `src/app/blog/[slug]/page.tsx`ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ê°„ë‹¨í•˜ê²Œ ì“¸ ìˆ˜ ìˆë‹¤!

```tsx
const BlogContentPage = async ({
    params,
}: {
    params: Promise<{ slug: string }>;
}) => {
    const slug = (await params).slug;

    const { default: Post } = await import(`@/contents/${slug}.mdx`);

    return <Post />;
};
```

ì—¬ê¸°ì„œ `slug`ëŠ” íŒŒì¼ ì´ë¦„ì´ë‹¤. ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ `contents/`í´ë”ì—ì„œ ê° íŒŒì¼ì˜ íŒŒì¼ëª…ì„ ìš°ì„  ì½ê³ , ì´ë¥¼ í•œ objectì— ë‹´ì•„ parameterë¡œ ë„˜ê²¨ì£¼ë©´ ëœë‹¤.

```ts
interface SlugResult {
    slugs: { slug: string }[];
}

async function generateBlogContentsSlugs(): Promise<SlugResult> {
    const CONTENT_DIR = path.join(process.cwd(), "src/contents");

    const mdxFiles = fs
        .readdirSync(CONTENT_DIR)
        .filter((file) => file.endsWith(".mdx"))
        .map((file) => ({
            slug: path.parse(file).name,
        }));

    return { slugs: mdxFiles };
}
```

> FS ëª¨ë“ˆ: file systemì„ ë‹¤ë£¨ëŠ” ë‚´ì¥ ëª¨ë“ˆ <br/>
> ì—¬ê¸°ì„œëŠ” `readdirSync`ë¥¼ í†µí•´ **ë™ê¸°ì ìœ¼ë¡œ** ë””ë ‰í„°ë¦¬ë¥¼ ì½ì—ˆìŒ. <br/>
> +) ì§€ê¸ˆì€ build timeì— ì‹¤í–‰ë˜ëŠ” ì½”ë“œì´ê¸° ë•Œë¬¸ì— ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•´ë„ ë¬¸ì œê°€ ì—†ì§€ë§Œ, ì¶”í›„ì— runtimeì—ì„œ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ê²½ìš°ì—ëŠ” `readdir`ì„ ì¨ì„œ ë¶€í•˜ë¥¼ ì‹ ê²½ì“°ì.

<br />

ìœ„ì—ì„œ ì¶”ì¶œëœ slugë¥¼ parameterë¡œ ë„˜ê¸¸ ë•Œì—ëŠ” `generateStaticParams`ë¥¼ ì´ìš©í–ˆë‹¤.

> `generateStaticParams`: Next.js APIë¡œ, ì˜›ë‚  `getStaticProps`ì™€ ìœ ì‚¬í•¨. <br/> build timeì— URL parameter ì¡°í•©ì„ ë¯¸ë¦¬ ì‚°ì¶œ -> ì‚°ì¶œëœ pagesë¥¼ staticí•˜ê²Œ ë Œë”ë§

> **ì£¼ì˜í•  ì **: `generateStaticParams`ëŠ” build timeì— ì‹¤í–‰ëœë‹¤! ë”°ë¼ì„œ, runtimeì— ë™ì ìœ¼ë¡œ dataë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ì—†ìŒ. ê·¸ë˜ì„œ, <u>Next.js API endpointë¥¼ ì´ìš©í•œ ë¡œì§ì€ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤!!</u>

ë¹Œë“œë¥¼ í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ë¸”ë¡œê·¸ ê¸€ì´ static pathì™€ í•¨ê»˜ SSGë¡œ ë§Œë“¤ì–´ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤

```plaintext

Route (app)                              Size     First Load JS
â”Œ â—‹ /                                    1.78 kB         126 kB
â”œ â—‹ /_not-found                          982 B           106 kB
â”œ â—‹ /blog                                135 B           105 kB
â”” â— /blog/[slug]                         4.29 kB         128 kB
    â”” /blog/first

â—‹  (Static)  prerendered as static content
â—  (SSG)     prerendered as static HTML (uses generateStaticParams)
```

### ğŸ™‚â€â†•ï¸ ë¸”ë¡œê·¸ ê¸€ ëª©ë¡ì„ ë§Œë“¤ì–´ë³´ì

ì¼ë‹¨ ë¸”ë¡œê·¸ ê¸€ íŒŒì¼ëª…ì€ ìœ„ì˜ ë°©ë²•ì—ì„œ ëª¨ë‘ ì•Œì•„ëƒˆì—ˆë‹¤. ê·¸ëŸ°ë° íŒŒì¼ëª…ë§Œìœ¼ë¡œëŠ” ë¸”ë¡œê·¸ ê¸€ ëª©ë¡ì„ ë§Œë“¤ê¸°ì— ë¶€ì¡±í•¨.

ì•„ê¹Œ mdx íŒŒì¼ì—ëŠ” JSX(TSX)ê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤ê³  í–ˆìœ¼ë‹ˆ, ë¸”ë¡œê·¸ ê¸€ íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì´ metadataë¥¼ ë„£ì–´ì£¼ì—ˆë‹¤.

```tsx
export const metadata = {
    title: "ì²« ë¸”ë¡œê·¸ ê¸€",
    description: "ì´ ë¸”ë¡œê·¸ë¥¼ ì–´ë–»ê²Œ ë§Œë“¤ì—ˆì„ê¹Œ~",
    date: "2025-02-19T03:02:14",
    tags: ["Frontend", "Next.js"],
};
```

ì´ì œ ì•„ê¹Œ íŒŒì¼ëª…ì„ ì½ì—ˆë˜ ê±° ì²˜ëŸ¼ íŒŒì¼ ì† metadataë¥¼ íŒŒì‹±í•˜ë©´ ë  ê²ƒ ê°™ë‹¤! ë‚˜ëŠ” Regexë¥¼ ì¼ë‹¤.

```ts
function extractMetadata(content: string): PostMeta | null {
    const regex = /export\s+const\s+metadata\s*=\s*(\{[\s\S]*?\});/;
    const match = content.match(regex);

    if (!match?.[1]) return null;

    return JSON5.parse(match[1]) as PostMeta;
}
```

> **`JSON5.parse`ë¥¼ ì“´ ì´ìœ **: JSONì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ” single quoteë‚˜ trailing commaê°€ í¬í•¨ëì„ ê²½ìš°ë¥¼ ì‰½ê²Œ í•¸ë“¤ë§í•˜ê¸° ìœ„í•´ ì¼ë‹¤<br />JSON5ê°€ ì¢€ ë” ìœ ì—°í•˜ê²Œ íŒŒì‹±í•´ì¤€ë‹¤!

ì´ì œ metadataë¥¼ ì½ê³  ë¯¸ë¦¬ë³´ê¸° ë¦¬ìŠ¤íŠ¸ UIì— ë„£ì–´ì£¼ì. ë¦¬ì•¡íŠ¸ ë°°ìš°ë©´ ê°€ì¥ ë§ì´ ì“°ëŠ” `map()`ì„ ì¼ë‹¤.

```tsx
const PreviewList = async () => {
    const { metadataList, error } = await getAllMdxMetadata("src/contents");
    ...
    return (
        <section>
            {metadataList.map((meta) => (
                <PreviewListItem key={meta.slug} meta={meta} />
            ))}
        </section>
    );
};
```

### ğŸ–¼ï¸ ë¸”ë¡œê·¸ ê¾¸ë¯¸ê¸°

ê¹”ë”í•˜ê³  ë¯¸ë‹ˆë©€?í•œ ë””ìì¸ì„ ë§Œë“¤ì–´ë´¤ë‹¤. ë³´ê¸° ê´œì°®ë‚˜

í™ˆí™”ë©´ì— ìˆëŠ” ì œëª©ì´ í˜ì´ì§€ ë“¤ì–´ê°€ë©´ì„œ ì‘ê²Œ ë°”ë€ŒëŠ” ì• ë‹ˆë©”ì´ì…˜ë„ ë„£ì–´ë´¤ë‹¤. ì´ê±´ `View Transition API`ë¡œ ë§Œë“¤ì—ˆë‹¤.
framer-motionê°™ì€ê±° ì•ˆì“°ê³ ë„ ì˜ˆì˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤!

ì°¸ê³ : [View Transition API](https://developer.mozilla.org/en-US/docs/Web/API/View_Transition_API)

ì´ì œ ì‚¬íŒŒë¦¬ë„ ì§€ì›ë˜ëŠ” ëª¨ì–‘ì´ë‹¤ ğŸ¤¤

ìœ„ì— ì½”ë“œ ë°•ìŠ¤ë“¤ì€ [sugar-high](https://github.com/huozhi/sugar-high)ë¼ëŠ” ì•„ì£¼ ê°€ë²¼ìš´ í…Œë§ˆë¥¼ ì¼ë‹¤. ì„¤ì¹˜í•˜ê³  css variablesë§Œ ì¶”ê°€í•˜ë©´ ëœë‹¤. ì•„ë˜ëŠ” ë‚´ê°€ ì‚¬ìš©í•œ ìƒ‰ì´ë‹¤!

```css
:root {
    --sh-class: #82aaff;
    --sh-identifier: #c3e88d;
    --sh-sign: #89ddff;
    --sh-property: #ffcb6b;
    --sh-entity: #f07178;
    --sh-jsxliterals: #c792ea;
    --sh-string: #c3e88d;
    --sh-keyword: #f07178;
    --sh-comment: #5c6370;
}
```

### ëìœ¼ë¡œ

ê¸°íƒ€ ë“±ë“± ì½”ë“œëŠ” ëª¨ë‘ [ì—¬ê¸°](https://github.com/dohyeoplim/blog)ì— ì˜¬ë ¤ë‘ì—ˆìœ¼ë‹ˆ ë§ì€ í”¼ë“œë°± ë°”ëŒ~

</BlogLayout>
